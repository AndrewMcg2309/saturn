name: GitHub Actions
on:
  pull_request:
    types:
      - closed
jobs:
  Merge_Master_Run:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - run: echo "This is for deploying the code to AWS with the updated details"
      - run: echo "This will only run when a pull request is merged with master"

#      Access AWS
      - run: export AWS_ACCESS_KEY_ID=${{ secrets.AWS_ACCESS_KEY }}
      - run: export AWS_SECRET_ACCESS_KEY=${{ secrets.SECRET_ACCESS_KEY }}
      - run: export AWS_DEFAULT_REGION=eu-west-1

#      ZIP folder as html.zip + push to s3
      - run: zip -r html.zip web
      - run: aws s3 cp html.zip s3://am-web-project/Web/html.zip

